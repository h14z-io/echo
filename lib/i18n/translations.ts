export type Locale = 'en' | 'es' | 'pt'

export const LOCALE_NAMES: Record<Locale, string> = {
  en: 'English',
  es: 'Español',
  pt: 'Português',
}

export const LOCALE_LANGUAGE: Record<Locale, string> = {
  en: 'English',
  es: 'Spanish',
  pt: 'Portuguese',
}

// Nested translation type - allows dot-notation access
type NestedStrings = { [key: string]: string | NestedStrings }

function flatten(obj: NestedStrings, prefix = ''): Record<string, string> {
  const result: Record<string, string> = {}
  for (const [key, value] of Object.entries(obj)) {
    const path = prefix ? `${prefix}.${key}` : key
    if (typeof value === 'string') {
      result[path] = value
    } else {
      Object.assign(result, flatten(value, path))
    }
  }
  return result
}

const en: NestedStrings = {
  nav: {
    home: 'Home',
    notes: 'Notes',
    folders: 'Folders',
    insights: 'Insights',
  },
  home: {
    title: 'Echo',
    tapToRecord: 'Tap to record',
    microphone: 'Microphone',
    recent: 'Recent',
    noRecordings: 'No recordings yet',
    startHint: 'Tap the button above to start',
  },
  recording: {
    recording: 'Recording...',
    paused: 'Paused',
    processing: 'Processing...',
    transcribing: 'Transcribing your note...',
    step1: 'Uploading your audio...',
    step2: 'Warming up the AI...',
    step3: 'Listening carefully...',
    step4: 'Transcribing every word...',
    step5: 'Generating a summary...',
    step6: 'Adding the finishing touches...',
    step7: 'Almost there...',
    pause: 'Pause',
    resume: 'Resume',
    cancel: 'Cancel',
  },
  notes: {
    title: 'Notes',
    search: 'Search notes...',
    noNotes: 'No notes found',
  },
  noteDetail: {
    title: 'Note',
    aiSummary: 'AI Summary',
    transcript: 'Transcript',
    tags: 'Tags',
    moveToFolder: 'Move to folder',
    addToInsight: 'Add to insight',
    delete: 'Delete',
    deleteConfirm: 'Delete this note?',
    selectFolder: 'Select Folder',
    selectInsight: 'Select Insight',
    noFolders: 'No folders yet',
    noInsights: 'No insights yet',
    removeFromFolder: 'None (remove from folder)',
    movedToFolder: 'Moved to "{name}"',
    removedFromFolder: 'Removed from folder',
    addedToInsight: 'Added to "{name}"',
    alreadyInInsight: 'Already in this insight',
    createNewFolder: 'Create new folder',
    createNewInsight: 'Create new insight',
    processingFailed: 'Processing failed. Please try again.',
    retry: 'Retry',
    retrying: 'Retrying...',
    notFound: 'Note not found',
    notFoundDesc: 'This note may have been deleted.',
    backToNotes: 'Back to Notes',
    copied: 'Copied!',
    copy: 'Copy',
  },
  folders: {
    title: 'Folders',
    newFolder: 'New Folder',
    folderName: 'Folder name',
    createFolder: 'Create Folder',
    createNew: '+ Create new folder',
    deleteConfirm: 'Delete this folder?',
    noNotes: 'No notes in this folder',
    addFromDetail: 'Add notes from note detail',
    editName: 'Rename',
    deleteFolder: 'Delete folder',
    confirmDelete: 'Are you sure you want to delete this folder?',
  },
  insights: {
    title: 'Insights',
    newInsight: 'New Insight',
    insightName: 'Insight name...',
    create: 'Create',
    noInsights: 'No insights yet',
    noInsightsDesc: 'Create an Insight to consolidate multiple notes into AI-generated analysis',
    createInsight: 'Create Insight',
    addNotes: 'Add Notes',
    noNotesAdded: 'No notes added yet',
    addNotesToInsight: 'Add notes to this insight',
    generateInsights: 'Generate Insights',
    generating: 'Generating insights...',
    askAnything: 'Ask anything about these notes...',
    summary: 'Summary',
    keyPoints: 'Key Points',
    actionItems: 'Action Items',
    timeline: 'Timeline',
    regenerate: 'Re-generate',
    copyMarkdown: 'Copy as Markdown',
    deleteInsight: 'Delete Insight',
    confirmDelete: 'Are you sure you want to delete "{name}"? This cannot be undone.',
    notGenerated: 'Not generated yet',
    generated: 'Generated {date}',
    deleteConfirm: 'Delete this insight?',
    save: 'Save',
    searchNotes: 'Search notes...',
    noNotesFound: 'No notes found',
    noNotesAvailable: 'No notes available',
    addNotesToGenerate: 'Add notes to generate insights',
  },
  settings: {
    title: 'Settings',
    language: 'Language',
    aiConfig: 'AI Configuration',
    serverSideKey: 'API key configured server-side',
    storage: 'Storage',
    migrateFromV1: 'Migrate from v1',
    migrateDesc: 'We detected data from a previous version. Migrate to the new format.',
    migrateNow: 'Migrate Now',
    migrating: 'Migrating...',
    migrationComplete: 'Migration complete! {notes} notes and {folders} folders migrated.',
    migrationFailed: 'Migration failed:',
    dangerZone: 'Danger Zone',
    deleteAllData: 'Delete All Data',
    deleteConfirm: 'Are you sure? This cannot be undone.',
    deleteAll: 'Yes, delete everything',
    about: 'About',
    version: 'Echo v2.0',
    description: 'Voice notes with AI transcription',
    builtWith: 'Built with Next.js + Gemini 2.5 Flash',
  },
  onboarding: {
    record: 'Record',
    recordDesc: 'Capture your thoughts with a single tap',
    transcribe: 'Transcribe',
    transcribeDesc: 'AI automatically transcribes and summarizes your notes',
    organize: 'Organize & Analyze',
    organizeDesc: 'Use folders, tags, and AI-powered Insights',
    next: 'Next',
    getStarted: 'Get Started',
  },
  common: {
    delete: 'Delete',
    cancel: 'Cancel',
    save: 'Save',
    copied: 'Copied!',
    copy: 'Copy',
    notes: 'notes',
    note: 'note',
    nNotes: '{count} notes',
    nNote: '{count} note',
  },
}

const es: NestedStrings = {
  nav: {
    home: 'Inicio',
    notes: 'Notas',
    folders: 'Carpetas',
    insights: 'Análisis',
  },
  home: {
    title: 'Echo',
    tapToRecord: 'Toca para grabar',
    microphone: 'Micrófono',
    recent: 'Recientes',
    noRecordings: 'Aún no hay grabaciones',
    startHint: 'Toca el botón de arriba para comenzar',
  },
  recording: {
    recording: 'Grabando...',
    paused: 'Pausado',
    processing: 'Procesando...',
    transcribing: 'Transcribiendo tu nota...',
    step1: 'Subiendo tu audio...',
    step2: 'Calentando la IA...',
    step3: 'Escuchando atentamente...',
    step4: 'Transcribiendo cada palabra...',
    step5: 'Generando un resumen...',
    step6: 'Dando los toques finales...',
    step7: 'Ya casi está...',
    pause: 'Pausar',
    resume: 'Reanudar',
    cancel: 'Cancelar',
  },
  notes: {
    title: 'Notas',
    search: 'Buscar notas...',
    noNotes: 'No se encontraron notas',
  },
  noteDetail: {
    title: 'Nota',
    aiSummary: 'Resumen IA',
    transcript: 'Transcripción',
    tags: 'Etiquetas',
    moveToFolder: 'Mover a carpeta',
    addToInsight: 'Agregar a análisis',
    delete: 'Eliminar',
    deleteConfirm: '¿Eliminar esta nota?',
    selectFolder: 'Seleccionar Carpeta',
    selectInsight: 'Seleccionar Análisis',
    noFolders: 'Aún no hay carpetas',
    noInsights: 'Aún no hay análisis',
    removeFromFolder: 'Ninguna (quitar de carpeta)',
    movedToFolder: 'Movido a "{name}"',
    removedFromFolder: 'Removido de carpeta',
    addedToInsight: 'Agregado a "{name}"',
    alreadyInInsight: 'Ya está en este análisis',
    createNewFolder: 'Crear nueva carpeta',
    createNewInsight: 'Crear nuevo análisis',
    processingFailed: 'El procesamiento falló. Intenta de nuevo.',
    retry: 'Reintentar',
    retrying: 'Reintentando...',
    notFound: 'Nota no encontrada',
    notFoundDesc: 'Esta nota pudo haber sido eliminada.',
    backToNotes: 'Volver a Notas',
    copied: '¡Copiado!',
    copy: 'Copiar',
  },
  folders: {
    title: 'Carpetas',
    newFolder: 'Nueva Carpeta',
    folderName: 'Nombre de carpeta',
    createFolder: 'Crear Carpeta',
    createNew: '+ Crear nueva carpeta',
    deleteConfirm: '¿Eliminar esta carpeta?',
    noNotes: 'No hay notas en esta carpeta',
    addFromDetail: 'Agrega notas desde el detalle de nota',
    editName: 'Renombrar',
    deleteFolder: 'Eliminar carpeta',
    confirmDelete: '¿Estás seguro de que quieres eliminar esta carpeta?',
  },
  insights: {
    title: 'Análisis',
    newInsight: 'Nuevo Análisis',
    insightName: 'Nombre del análisis...',
    create: 'Crear',
    noInsights: 'Aún no hay análisis',
    noInsightsDesc: 'Crea un Análisis para consolidar múltiples notas en análisis generados por IA',
    createInsight: 'Crear Análisis',
    addNotes: 'Agregar Notas',
    noNotesAdded: 'Aún no se han agregado notas',
    addNotesToInsight: 'Agrega notas a este análisis',
    generateInsights: 'Generar Análisis',
    generating: 'Generando análisis...',
    askAnything: 'Pregunta lo que quieras sobre estas notas...',
    summary: 'Resumen',
    keyPoints: 'Puntos Clave',
    actionItems: 'Acciones',
    timeline: 'Cronología',
    regenerate: 'Re-generar',
    copyMarkdown: 'Copiar como Markdown',
    deleteInsight: 'Eliminar Análisis',
    confirmDelete: '¿Estás seguro de que quieres eliminar "{name}"? Esta acción no se puede deshacer.',
    notGenerated: 'No generado aún',
    generated: 'Generado {date}',
    deleteConfirm: '¿Eliminar este análisis?',
    save: 'Guardar',
    searchNotes: 'Buscar notas...',
    noNotesFound: 'No se encontraron notas',
    noNotesAvailable: 'No hay notas disponibles',
    addNotesToGenerate: 'Agrega notas para generar análisis',
  },
  settings: {
    title: 'Configuración',
    language: 'Idioma',
    aiConfig: 'Configuración IA',
    serverSideKey: 'Clave API configurada en el servidor',
    storage: 'Almacenamiento',
    migrateFromV1: 'Migrar desde v1',
    migrateDesc: 'Detectamos datos de una versión anterior. Migra al nuevo formato.',
    migrateNow: 'Migrar Ahora',
    migrating: 'Migrando...',
    migrationComplete: '¡Migración completada! {notes} notas y {folders} carpetas migradas.',
    migrationFailed: 'Migración fallida:',
    dangerZone: 'Zona de Peligro',
    deleteAllData: 'Eliminar Todos los Datos',
    deleteConfirm: '¿Estás seguro? Esta acción no se puede deshacer.',
    deleteAll: 'Sí, eliminar todo',
    about: 'Acerca de',
    version: 'Echo v2.0',
    description: 'Notas de voz con transcripción IA',
    builtWith: 'Hecho con Next.js + Gemini 2.5 Flash',
  },
  onboarding: {
    record: 'Grabar',
    recordDesc: 'Captura tus pensamientos con un solo toque',
    transcribe: 'Transcribir',
    transcribeDesc: 'La IA transcribe y resume tus notas automáticamente',
    organize: 'Organizar y Analizar',
    organizeDesc: 'Usa carpetas, etiquetas y análisis con IA',
    next: 'Siguiente',
    getStarted: 'Comenzar',
  },
  common: {
    delete: 'Eliminar',
    cancel: 'Cancelar',
    save: 'Guardar',
    copied: '¡Copiado!',
    copy: 'Copiar',
    notes: 'notas',
    note: 'nota',
    nNotes: '{count} notas',
    nNote: '{count} nota',
  },
}

const pt: NestedStrings = {
  nav: {
    home: 'Início',
    notes: 'Notas',
    folders: 'Pastas',
    insights: 'Análises',
  },
  home: {
    title: 'Echo',
    tapToRecord: 'Toque para gravar',
    microphone: 'Microfone',
    recent: 'Recentes',
    noRecordings: 'Nenhuma gravação ainda',
    startHint: 'Toque o botão acima para começar',
  },
  recording: {
    recording: 'Gravando...',
    paused: 'Pausado',
    processing: 'Processando...',
    transcribing: 'Transcrevendo sua nota...',
    step1: 'Enviando seu áudio...',
    step2: 'Preparando a IA...',
    step3: 'Ouvindo atentamente...',
    step4: 'Transcrevendo cada palavra...',
    step5: 'Gerando um resumo...',
    step6: 'Dando os toques finais...',
    step7: 'Quase lá...',
    pause: 'Pausar',
    resume: 'Retomar',
    cancel: 'Cancelar',
  },
  notes: {
    title: 'Notas',
    search: 'Buscar notas...',
    noNotes: 'Nenhuma nota encontrada',
  },
  noteDetail: {
    title: 'Nota',
    aiSummary: 'Resumo IA',
    transcript: 'Transcrição',
    tags: 'Tags',
    moveToFolder: 'Mover para pasta',
    addToInsight: 'Adicionar à análise',
    delete: 'Excluir',
    deleteConfirm: 'Excluir esta nota?',
    selectFolder: 'Selecionar Pasta',
    selectInsight: 'Selecionar Análise',
    noFolders: 'Nenhuma pasta ainda',
    noInsights: 'Nenhuma análise ainda',
    removeFromFolder: 'Nenhuma (remover da pasta)',
    movedToFolder: 'Movido para "{name}"',
    removedFromFolder: 'Removido da pasta',
    addedToInsight: 'Adicionado a "{name}"',
    alreadyInInsight: 'Já está nesta análise',
    createNewFolder: 'Criar nova pasta',
    createNewInsight: 'Criar nova análise',
    processingFailed: 'Processamento falhou. Tente novamente.',
    retry: 'Tentar novamente',
    retrying: 'Tentando novamente...',
    notFound: 'Nota não encontrada',
    notFoundDesc: 'Esta nota pode ter sido excluída.',
    backToNotes: 'Voltar às Notas',
    copied: 'Copiado!',
    copy: 'Copiar',
  },
  folders: {
    title: 'Pastas',
    newFolder: 'Nova Pasta',
    folderName: 'Nome da pasta',
    createFolder: 'Criar Pasta',
    createNew: '+ Criar nova pasta',
    deleteConfirm: 'Excluir esta pasta?',
    noNotes: 'Nenhuma nota nesta pasta',
    addFromDetail: 'Adicione notas pelo detalhe da nota',
    editName: 'Renomear',
    deleteFolder: 'Excluir pasta',
    confirmDelete: 'Tem certeza de que deseja excluir esta pasta?',
  },
  insights: {
    title: 'Análises',
    newInsight: 'Nova Análise',
    insightName: 'Nome da análise...',
    create: 'Criar',
    noInsights: 'Nenhuma análise ainda',
    noInsightsDesc: 'Crie uma Análise para consolidar múltiplas notas em análises geradas por IA',
    createInsight: 'Criar Análise',
    addNotes: 'Adicionar Notas',
    noNotesAdded: 'Nenhuma nota adicionada ainda',
    addNotesToInsight: 'Adicione notas a esta análise',
    generateInsights: 'Gerar Análises',
    generating: 'Gerando análises...',
    askAnything: 'Pergunte qualquer coisa sobre estas notas...',
    summary: 'Resumo',
    keyPoints: 'Pontos-Chave',
    actionItems: 'Ações',
    timeline: 'Cronologia',
    regenerate: 'Re-gerar',
    copyMarkdown: 'Copiar como Markdown',
    deleteInsight: 'Excluir Análise',
    confirmDelete: 'Tem certeza de que deseja excluir "{name}"? Isso não pode ser desfeito.',
    notGenerated: 'Não gerado ainda',
    generated: 'Gerado {date}',
    deleteConfirm: 'Excluir esta análise?',
    save: 'Salvar',
    searchNotes: 'Buscar notas...',
    noNotesFound: 'Nenhuma nota encontrada',
    noNotesAvailable: 'Nenhuma nota disponível',
    addNotesToGenerate: 'Adicione notas para gerar análises',
  },
  settings: {
    title: 'Configurações',
    language: 'Idioma',
    aiConfig: 'Configuração IA',
    serverSideKey: 'Chave API configurada no servidor',
    storage: 'Armazenamento',
    migrateFromV1: 'Migrar do v1',
    migrateDesc: 'Detectamos dados de uma versão anterior. Migre para o novo formato.',
    migrateNow: 'Migrar Agora',
    migrating: 'Migrando...',
    migrationComplete: 'Migração concluída! {notes} notas e {folders} pastas migradas.',
    migrationFailed: 'Migração falhou:',
    dangerZone: 'Zona de Perigo',
    deleteAllData: 'Excluir Todos os Dados',
    deleteConfirm: 'Tem certeza? Isso não pode ser desfeito.',
    deleteAll: 'Sim, excluir tudo',
    about: 'Sobre',
    version: 'Echo v2.0',
    description: 'Notas de voz com transcrição IA',
    builtWith: 'Feito com Next.js + Gemini 2.5 Flash',
  },
  onboarding: {
    record: 'Gravar',
    recordDesc: 'Capture seus pensamentos com um único toque',
    transcribe: 'Transcrever',
    transcribeDesc: 'A IA transcreve e resume suas notas automaticamente',
    organize: 'Organizar e Analisar',
    organizeDesc: 'Use pastas, tags e análises com IA',
    next: 'Próximo',
    getStarted: 'Começar',
  },
  common: {
    delete: 'Excluir',
    cancel: 'Cancelar',
    save: 'Salvar',
    copied: 'Copiado!',
    copy: 'Copiar',
    notes: 'notas',
    note: 'nota',
    nNotes: '{count} notas',
    nNote: '{count} nota',
  },
}

export const translations: Record<Locale, Record<string, string>> = {
  en: flatten(en),
  es: flatten(es),
  pt: flatten(pt),
}
